!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define("webflow.confirmation",[],o):"object"==typeof exports?exports["webflow.confirmation"]=o():e["webflow.confirmation"]=o()}(this,(()=>(()=>{var e={591:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>s});const s='<div class="loading-screen confirmation active" id="loading-screen-confirmation"> <h2 class="heading-2 loading-text">PLEASE DON\'T CLOSE THE BROWSER</h2> <div class="lds-ring"><div></div><div></div><div></div><div></div></div> </div>'},965:(e,o,t)=>{t(737);let s="https://ovw1bhw4bf.execute-api.ap-southeast-1.amazonaws.com/prod";const n=`${s}/designs/get-options`,r=`${s}/designs/reserve-design`,i=`${s}/designs/confirm-design`,a=`${s}/designs/reroll`;e.exports={getDesigns:async function(e){const o={answers:e};try{const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){throw console.error("There was a problem with the fetch operation:",e),e}},reserveDesign:async function(e){const o={token:e};try{const e=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){throw console.error("There was a problem with the fetch operation:",e),e}},confirmDesign:async function(e,o,t){const s={email:e,orderId:o,tokens:[t]};try{const e=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){throw console.error("There was a problem with the fetch operation:",e),e}},viewProfile:async function(e){try{const o=await fetch(`https://ovw1bhw4bf.execute-api.ap-southeast-1.amazonaws.com/prod/profile/view?id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Network response was not ok");return await o.json()}catch(e){throw console.error("There was a problem with the fetch operation:",e),e}},rerollDesigns:async function(e){console.log("rerolling designs");const o={token:e};console.log(o);try{const e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){throw console.error("There was a problem with the fetch operation:",e),e}}}},737:e=>{let o=0,t=!1;function s(e){const o=JSON.stringify(e);localStorage.setItem("resetProcess",o)}let n={personalities:[{name:"",quiz:[],personality:{personalityType:"",personalityRole:"",extroversionScore:0,sensingScore:0,feelingScore:0,prospectingScore:0},products:[{product:"Personalized T-Shirt",collection:"Original Collection",price:"￡ 14.99 GBP",comparePrice:"￡ 25.99 GBP",image:"https://uploads-ssl.webflow.com/649a7177573e38f6a02e440d/65cf397b8adefed460afad89_product-img.webp",selectedSize:"",description:"Made from premium, 100% sustainably sourced cotton.",options:[],selectedDesign:""}]}],orderEmail:"",orderID:""},r={currentPhase:0,phases:[],totalProgress:0,nameDone:!1,quizDone:!1,personalityDone:!1,designDone:!1,sizeDone:!1,rerolls:0,rerollToken:""};function i(e){0===r.phases.length&&e.forEach(((e,o)=>{const t=e.querySelectorAll(".phase-step"),s=e.querySelectorAll(".radio-question"),n=s?s.length:0;r.phases.push(((e,o,t,s)=>({length:e,progress:o,questions:t,completed:s}))(t.length,0,n,!1))}))}function a(e){const o=JSON.stringify(e);localStorage.setItem("order",o)}function c(e){const o=JSON.stringify(e);localStorage.setItem("configurationStatus",o)}function l(e){const o=localStorage.getItem(e);return null!==o?JSON.parse(o):null}e.exports={initialCookiesSetup:async function(e){const p=l("order");p?n=p:a(n);const d=l("configurationStatus");d?r=d:(i(e),c(r));const u=l("currentPersonality");u?o=u:function(e){const o=JSON.stringify(e);localStorage.setItem("currentPersonality",o)}(o);const h=l("resetProcess");h?t=h:s(t)},updateQuiz:function(e,o,t){n.personalities[e].quiz[o]=t,a(n)},updateName:function(e){n.personalities[o].name=e,a(n)},updateCurrentPhase:function(e){r.currentPhase=e,c(r)},updatePhase:function(e){r.phases[r.currentPhase].progress=e,c(r)},createPhases:i,moveForward:function(){const e=r.currentPhase;r.phases[e],r.phases[e].progress<=r.phases[e].length-1?r.phases[e].progress++:r.currentPhase<r.phases.length-1?(r.phases[r.currentPhase].completed=!0,r.currentPhase++):r.currentPhase===r.phases.length-1&&(r.phases[r.currentPhase].progress++,r.phases[r.currentPhase].completed=!0),c(r)},moveBackward:function(){r.currentPhase--,c(r)},updateTotalProgress:function(){const e=r.phases.filter((e=>e.questions>0));let o=0;e.forEach((e=>{o+=e.progress}));let t=0;e.forEach((e=>{t+=e.questions})),r.totalProgress=Math.round(o/t*100),c(r)},updateNameDone:function(){""===n.personalities[o].name?(r.nameDone=!1,r.phases[0].completed=!1,r.phases[0].progress=0):(r.phases[0].completed=!0,r.phases[0].progress=1,r.nameDone=!0),c(r)},updateQuizDone:function(){n.personalities[o].quiz.length<16?r.quizDone=!1:r.quizDone=!0,c(r)},getOrder:()=>n,getConfigurationStatus:()=>r,getCurrentPersonality:()=>o,phaseDone:()=>{const e=r.phases[r.currentPhase];return e.progress===e.length},skipPhases:function(){r.currentPhase++,c(r)},designsFetched:()=>l("order").personalities[o].products[0].options.length>0,designsSelected:()=>""!==n.personalities[o].products[0].selectedDesign,lastStep:()=>{const e=r.phases[r.currentPhase];return e.progress===e.length-1},updateGetDesigns:e=>{const t=e.options,s=e.personality;n.personalities[o].personality.personalityType=s.personalityType,n.personalities[o].personality.personalityRole=s.personalityRole,n.personalities[o].personality.extroversionScore=s.extroversionScore,n.personalities[o].personality.sensingScore=s.sensingScore,n.personalities[o].personality.feelingScore=s.feelingScore,n.personalities[o].personality.prospectingScore=s.prospectingScore,t.forEach((e=>{n.personalities[o].products[0].options.push(e)}));const i=t[0].token;r.rerollToken=i,r.personalityDone=!0,r.phases[2].completed=!0,r.phases[2].progress=1,a(n),c(r)},getCookie:l,getOptions:()=>n.personalities[o].products[0].options,updateSelectedDesign:e=>{n.personalities[o].products[0].selectedDesign=e,r.phases[3].completed=!0,r.phases[3].progress=1,a(n),c(r)},getSelectedDesign:()=>n.personalities[o].products[0].selectedDesign,designDone:()=>r.designDone,updateDesignDone:()=>{r.designDone=!0,c(r)},updateSelectedSize:e=>{console.log("update size"),"Select Size"!==e?(n.personalities[o].products[0].selectedSize=e,a(n)):(n.personalities[o].products[0].selectedSize="",a(n))},personalityDone:()=>r.personalityDone,handleAddToCart:e=>{console.log("add to cart"),e&&""!==n.personalities[o].products[0].selectedSize?(r.phases[4].completed=!0,r.phases[4].progress=1,r.sizeDone=!0,c(r)):(r.phases[4].progress=0,r.phases[4].completed=!1,r.sizeDone=!1,c(r))},updateResetProcess:function(e){t=e,s(t)},rerollAllowed:()=>r.rerolls<3,updateRerolls:()=>{r.rerolls++,c(r)},clearOptions:()=>{n.personalities[o].products[0].options=[],a(n)},clearSelectedDesign:()=>{n.personalities[o].products[0].selectedDesign="",a(n)}}}},o={};function t(s){var n=o[s];if(void 0!==n)return n.exports;var r=o[s]={exports:{}};return e[s](r,r.exports,t),r.exports}return t.d=(e,o)=>{for(var s in o)t.o(o,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:o[s]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{t(965);const e=t(965),o=t(591),s=document.getElementById("loading-container");let n="",r="",i="";function a(e){const o=localStorage.getItem(e);return null!==o?JSON.parse(o):null}function a(e){const o=localStorage.getItem(e);return null!==o?JSON.parse(o):null}function c(e){const o=JSON.stringify(e);localStorage.setItem("order",o)}function l(e){const o=e.split("?")[1];if(o){const e=o.split("&");for(const o of e){const[e,t]=o.split("=");if("orderId"===e)return t}}return null}function p(e){const o=JSON.stringify(e);localStorage.setItem("resetProcess",o)}async function d(o,t,n){try{await e.confirmDesign(o,t,n),s.style.display="none",p(!0)}catch(e){console.error("There was a problem with the fetch operation:",e),p(!0),s.style.display="none"}}s.innerHTML=o.default,document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("order-email");new MutationObserver((function(o,t){for(let t of o)if("childList"===t.type){const o=a("order");n=e.innerHTML,r=l(window.location.href),i=o.personalities[0].products[0].selectedDesign.token,o.orderID=r,c(o),d(n,r,i)}})).observe(e,{attributes:!0,childList:!0,subtree:!0}),s.style.display="flex";const o=document.querySelector(".w-commerce-commercecheckoutorderitemslist");new MutationObserver((e=>{e.forEach((e=>{"childList"===e.type&&o.hasChildNodes()&&(()=>{const e=a("order").personalities[0],o=e.products[0],t=e.name,s=e.personality.personalityRole,n=o.selectedDesign.prompt,r=o.selectedDesign.url,i=document.getElementById("confirmation-personality"),c=document.getElementById("confirmation-design-image"),l=document.getElementById("confirmation-design-text");""!==r&&c&&i&&l&&(c.src=r,l.innerHTML=n,i.innerHTML="anonymous"===t?s:t+" / "+s)})()}))})).observe(o,{childList:!0}),a("resetProcess")})),window.addEventListener("DOMContentLoaded",(()=>{}))})(),{}})()));